sap.ui.define(["exports","sap/ui/webc/common/thirdparty/localization/DateFormat","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/types/Integer","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/localization/dates/ExtremeDates","./CalendarPart","./generated/templates/YearPickerTemplate.lit","./generated/themes/YearPicker.css"],function(e,t,s,a,i,r,m,n,f,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=o(t);a=o(a);i=o(i);r=o(r);n=o(n);f=o(f);l=o(l);function o(e){return e&&e.__esModule?e:{default:e}}const h={tag:"ui5-yearpicker",properties:{selectedDates:{type:a.default,multiple:true,compareValues:true},_years:{type:Object,multiple:true},_hidden:{type:Boolean,noAttribute:true}},events:{change:{},navigate:{}}};const p=20;const c=4;class d extends n.default{static get metadata(){return h}static get styles(){return l.default}static get template(){return f.default}onBeforeRendering(){this._buildYears()}_buildYears(){if(this._hidden){return}const e=t.default.getDateInstance({format:"y",calendarType:this._primaryCalendarType},(0,i.default)());this._calculateFirstYear();this._lastYear=this._firstYear+p-1;const s=this._calendarDate;const a=this._minDate;const m=this._maxDate;const n=new r.default(s,this._primaryCalendarType);n.setYear(this._firstYear);const f=[];let l;for(let t=0;t<p;t++){l=n.valueOf()/1e3;const i=this.selectedDates.some(e=>{const t=r.default.fromTimestamp(e*1e3,this._primaryCalendarType);return t.getYear()===n.getYear()});const o=n.getYear()===s.getYear();const h=n.getYear()<a.getYear()||n.getYear()>m.getYear();const p={timestamp:l.toString(),_tabIndex:o?"0":"-1",focusRef:o,selected:i,ariaSelected:i?"true":"false",year:e.format(n.toLocalJSDate()),disabled:h,classes:"ui5-yp-item"};if(i){p.classes+=" ui5-yp-item--selected"}if(h){p.classes+=" ui5-yp-item--disabled"}const d=parseInt(t/c);if(f[d]){f[d].push(p)}else{f[d]=[p]}n.setYear(n.getYear()+1)}this._years=f}_calculateFirstYear(){const e=(0,m.getMaxCalendarDate)(this._primaryCalendarType).getYear();const t=this._calendarDate.getYear();if(!this._firstYear){this._firstYear=t-p/2}if(t<this._firstYear){this._firstYear-=p}else if(t>=this._firstYear+p){this._firstYear+=p}if(Math.abs(this._firstYear-t)>=p){this._firstYear=t-p/2}this._firstYear=Math.max(this._firstYear,this._minDate.getYear());this._firstYear=Math.min(this._firstYear,this._maxDate.getYear());if(this._firstYear>e-p+1){this._firstYear=e-p+1}}onAfterRendering(){if(!this._hidden){this.focus()}}_onkeydown(e){let t=true;if((0,s.isEnter)(e)){this._selectYear(e)}else if((0,s.isSpace)(e)){e.preventDefault()}else if((0,s.isLeft)(e)){this._modifyTimestampBy(-1)}else if((0,s.isRight)(e)){this._modifyTimestampBy(1)}else if((0,s.isUp)(e)){this._modifyTimestampBy(-c)}else if((0,s.isDown)(e)){this._modifyTimestampBy(c)}else if((0,s.isPageUp)(e)){this._modifyTimestampBy(-p)}else if((0,s.isPageDown)(e)){this._modifyTimestampBy(p)}else if((0,s.isHome)(e)||(0,s.isEnd)(e)){this._onHomeOrEnd((0,s.isHome)(e))}else if((0,s.isHomeCtrl)(e)){this._setTimestamp(parseInt(this._years[0][0].timestamp))}else if((0,s.isEndCtrl)(e)){this._setTimestamp(parseInt(this._years[p/c-1][c-1].timestamp))}else{t=false}if(t){e.preventDefault()}}_onHomeOrEnd(e){this._years.forEach(t=>{const s=t.findIndex(e=>r.default.fromTimestamp(parseInt(e.timestamp)*1e3).getYear()===this._calendarDate.getYear());if(s!==-1){const s=e?0:c-1;this._setTimestamp(parseInt(t[s].timestamp))}})}_setTimestamp(e){this._safelySetTimestamp(e);this.fireEvent("navigate",{timestamp:this.timestamp})}_modifyTimestampBy(e){this._safelyModifyTimestampBy(e,"year");this.fireEvent("navigate",{timestamp:this.timestamp})}_onkeyup(e){if((0,s.isSpace)(e)){this._selectYear(e)}}_selectYear(e){e.preventDefault();if(e.target.className.indexOf("ui5-yp-item")>-1){const t=this._getTimestampFromDom(e.target);this._safelySetTimestamp(t);this.fireEvent("change",{timestamp:this.timestamp})}}_hasPreviousPage(){return this._firstYear>this._minDate.getYear()}_hasNextPage(){return this._firstYear+p-1<this._maxDate.getYear()}_showPreviousPage(){this._modifyTimestampBy(-p)}_showNextPage(){this._modifyTimestampBy(p)}}d.define();var _=d;e.default=_});
//# sourceMappingURL=YearPicker.js.map