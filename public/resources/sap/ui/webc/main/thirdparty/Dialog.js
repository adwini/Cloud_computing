sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/common/thirdparty/base/util/clamp","sap/ui/webc/common/thirdparty/base/Keys","./Popup","sap/ui/webc/common/thirdparty/icons/resize-corner","./Icon","./generated/templates/DialogTemplate.lit","./generated/themes/BrowserScrollbar.css","./generated/themes/PopupsCommon.css","./generated/themes/Dialog.css"],function(e,t,i,s,n,r,a,h,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;i=u(i);n=u(n);a=u(a);h=u(h);o=u(o);d=u(d);l=u(l);function u(e){return e&&e.__esModule?e:{default:e}}const c=16;const _={tag:"ui5-dialog",slots:{header:{type:HTMLElement},footer:{type:HTMLElement}},properties:{headerText:{type:String},stretch:{type:Boolean},draggable:{type:Boolean},resizable:{type:Boolean},onPhone:{type:Boolean},onDesktop:{type:Boolean}}};class p extends n.default{constructor(){super();this._screenResizeHandler=this._center.bind(this);this._dragMouseMoveHandler=this._onDragMouseMove.bind(this);this._dragMouseUpHandler=this._onDragMouseUp.bind(this);this._resizeMouseMoveHandler=this._onResizeMouseMove.bind(this);this._resizeMouseUpHandler=this._onResizeMouseUp.bind(this)}static get metadata(){return _}static get dependencies(){return[a.default]}static get template(){return h.default}static get styles(){return[o.default,d.default,l.default]}static _isHeader(e){return e.classList.contains("ui5-popup-header-root")||e.getAttribute("slot")==="header"}async show(e=false){await super._open(e)}get isModal(){return true}get shouldHideBackdrop(){return false}get _ariaLabelledBy(){let e;if(this.headerText!==""&&!this._ariaLabel){e="ui5-popup-header-text"}return e}get _ariaModal(){return true}get _displayProp(){return"flex"}get _displayHeader(){return this.header.length||this.headerText||this.draggable||this.resizable}get _movable(){return!this.stretch&&this.onDesktop&&(this.draggable||this.resizable)}get _headerTabIndex(){return this._movable?"0":undefined}get _showResizeHandle(){return this.resizable&&this.onDesktop}get _minHeight(){let e=Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);const t=this._root.querySelector(".ui5-popup-header-root");if(t){e+=t.offsetHeight}const i=this._root.querySelector(".ui5-popup-footer-root");if(i){e+=i.offsetHeight}return e}_show(){super._show();this._center()}onBeforeRendering(){this._isRTL=this.effectiveDir==="rtl";this.onPhone=(0,t.isPhone)();this.onDesktop=(0,t.isDesktop)()}onAfterRendering(){if(!this.isOpen()&&this.open){this.show()}else if(this.isOpen()&&!this.open){this.close()}}onEnterDOM(){super.onEnterDOM();this._attachScreenResizeHandler()}onExitDOM(){super.onExitDOM();this._detachScreenResizeHandler()}_resize(){super._resize();if(this._screenResizeHandlerAttached){this._center()}}_attachScreenResizeHandler(){if(!this._screenResizeHandlerAttached){window.addEventListener("resize",this._screenResizeHandler);this._screenResizeHandlerAttached=true}}_detachScreenResizeHandler(){if(this._screenResizeHandlerAttached){window.removeEventListener("resize",this._screenResizeHandler);this._screenResizeHandlerAttached=false}}_center(){const e=window.innerHeight-this.offsetHeight,t=window.innerWidth-this.offsetWidth;Object.assign(this.style,{top:`${Math.round(e/2)}px`,left:`${Math.round(t/2)}px`})}_revertSize(){Object.assign(this.style,{top:"",left:"",width:"",height:""});this.removeEventListener("ui5-before-close",this._revertSize)}_onDragMouseDown(e){if(!this._movable||!this.draggable||!p._isHeader(e.target)){return}e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect();const{width:s,height:n}=window.getComputedStyle(this);Object.assign(this.style,{top:`${t}px`,left:`${i}px`,width:`${Math.round(Number.parseFloat(s)*100)/100}px`,height:`${Math.round(Number.parseFloat(n)*100)/100}px`});this._x=e.clientX;this._y=e.clientY;this._attachMouseDragHandlers()}_onDragMouseMove(e){e.preventDefault();const t=this._x-e.clientX;const i=this._y-e.clientY;const{left:s,top:n}=this.getBoundingClientRect();Object.assign(this.style,{left:`${Math.floor(s-t)}px`,top:`${Math.floor(n-i)}px`});this._x=e.clientX;this._y=e.clientY}_onDragMouseUp(){this._x=null;this._y=null;this._detachMouseDragHandlers()}_onDragOrResizeKeyDown(e){if(!this._movable||!p._isHeader(e.target)){return}if(this.draggable&&[s.isUp,s.isDown,s.isLeft,s.isRight].some(t=>t(e))){this._dragWithEvent(e);return}if(this.resizable&&[s.isUpShift,s.isDownShift,s.isLeftShift,s.isRightShift].some(t=>t(e))){this._resizeWithEvent(e)}}_dragWithEvent(e){const{top:t,left:n,width:r,height:a}=this.getBoundingClientRect();let h,o;switch(true){case(0,s.isUp)(e):h=t-c;o="top";break;case(0,s.isDown)(e):h=t+c;o="top";break;case(0,s.isLeft)(e):h=n-c;o="left";break;case(0,s.isRight)(e):h=n+c;o="left";break}h=(0,i.default)(h,0,o==="left"?window.innerWidth-r:window.innerHeight-a);this.style[o]=`${h}px`}_resizeWithEvent(e){this._detachScreenResizeHandler();this.addEventListener("ui5-before-close",this._revertSize);const{top:t,left:n}=this.getBoundingClientRect(),r=window.getComputedStyle(this),a=Number.parseFloat(r.minWidth),h=window.innerWidth-n,o=window.innerHeight-t;let d=Number.parseFloat(r.width),l=Number.parseFloat(r.height);switch(true){case(0,s.isUpShift)(e):l-=c;break;case(0,s.isDownShift)(e):l+=c;break;case(0,s.isLeftShift)(e):d-=c;break;case(0,s.isRightShift)(e):d+=c;break}d=(0,i.default)(d,a,h);l=(0,i.default)(l,this._minHeight,o);Object.assign(this.style,{width:`${d}px`,height:`${l}px`})}_attachMouseDragHandlers(){this._detachScreenResizeHandler();window.addEventListener("mousemove",this._dragMouseMoveHandler);window.addEventListener("mouseup",this._dragMouseUpHandler)}_detachMouseDragHandlers(){window.removeEventListener("mousemove",this._dragMouseMoveHandler);window.removeEventListener("mouseup",this._dragMouseUpHandler)}_onResizeMouseDown(e){if(!this._movable||!this.resizable){return}e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect();const{width:s,height:n,minWidth:r}=window.getComputedStyle(this);this._initialX=e.clientX;this._initialY=e.clientY;this._initialWidth=Number.parseFloat(s);this._initialHeight=Number.parseFloat(n);this._initialTop=t;this._initialLeft=i;this._minWidth=Number.parseFloat(r);this._cachedMinHeight=this._minHeight;Object.assign(this.style,{top:`${t}px`,left:`${i}px`});this._attachMouseResizeHandlers()}_onResizeMouseMove(e){const{clientX:t,clientY:s}=e;let n,r;if(this._isRTL){n=(0,i.default)(this._initialWidth-(t-this._initialX),this._minWidth,this._initialLeft+this._initialWidth);r=(0,i.default)(this._initialLeft+(t-this._initialX),0,this._initialX+this._initialWidth-this._minWidth)}else{n=(0,i.default)(this._initialWidth+(t-this._initialX),this._minWidth,window.innerWidth-this._initialLeft)}const a=(0,i.default)(this._initialHeight+(s-this._initialY),this._cachedMinHeight,window.innerHeight-this._initialTop);Object.assign(this.style,{height:`${a}px`,width:`${n}px`,left:r?`${r}px`:undefined})}_onResizeMouseUp(){delete this._initialX;delete this._initialY;delete this._initialWidth;delete this._initialHeight;delete this._initialTop;delete this._initialLeft;delete this._minWidth;delete this._cachedMinHeight;this._detachMouseResizeHandlers()}_attachMouseResizeHandlers(){this._detachScreenResizeHandler();window.addEventListener("mousemove",this._resizeMouseMoveHandler);window.addEventListener("mouseup",this._resizeMouseUpHandler);this.addEventListener("ui5-before-close",this._revertSize)}_detachMouseResizeHandlers(){window.removeEventListener("mousemove",this._resizeMouseMoveHandler);window.removeEventListener("mouseup",this._resizeMouseUpHandler)}}p.define();var g=p;e.default=g});
//# sourceMappingURL=Dialog.js.map