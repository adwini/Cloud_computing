sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/Keys","./generated/i18n/i18n-defaults","./Input","./generated/templates/MultiInputTemplate.lit","./generated/themes/MultiInput.css","./Token","./Tokenizer","./Icon"],function(e,t,s,n,i,o,r,u,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=c(t);i=c(i);o=c(o);r=c(r);u=c(u);a=c(a);l=c(l);function c(e){return e&&e.__esModule?e:{default:e}}const h={tag:"ui5-multi-input",properties:{showValueHelpIcon:{type:Boolean},expandedTokenizer:{type:Boolean}},slots:{tokens:{type:HTMLElement}},events:{"value-help-trigger":{},"token-delete":{detail:{token:{type:HTMLElement}}}}};class d extends i.default{static get metadata(){return h}static get render(){return t.default}static get template(){return o.default}static get styles(){return[i.default.styles,r.default]}constructor(){super();this._skipOpenSuggestions=false}valueHelpPress(e){this.closePopover();this.fireEvent("value-help-trigger",{})}showMorePress(e){this.expandedTokenizer=false;this.focus()}tokenDelete(e){const t=e.detail.ref;const s=this.tokens.filter(e=>e.selected);if(s.indexOf(t)===-1){s.push(t)}s.forEach(e=>{this.fireEvent("token-delete",{token:e})});this.focus()}valueHelpMouseDown(e){this.closePopover();this.tokenizer.closeMorePopover();this._valueHelpIconPressed=true;e.target.focus()}_tokenizerFocusOut(e){if(!this.contains(e.relatedTarget)){this.tokenizer._tokens.forEach(e=>{e.selected=false});this.tokenizer.scrollToStart()}}valueHelpMouseUp(e){setTimeout(()=>{this._valueHelpIconPressed=false},0)}innerFocusIn(){this.expandedTokenizer=true}_onkeydown(e){super._onkeydown(e);const t=(0,s.isHome)(e)&&e.target.selectionStart===0;if(t){this._skipOpenSuggestions=true;return this._focusFirstToken(e)}if((0,s.isLeft)(e)||(0,s.isBackSpace)(e)){this._skipOpenSuggestions=true;return this._handleLeft(e)}this._skipOpenSuggestions=false;if((0,s.isShow)(e)){this.valueHelpPress()}}_onTokenizerKeydown(e){const t=(0,s.isRightCtrl)(e);const n=!!(e.metaKey||e.ctrlKey);const i=this.tokens;if((0,s.isRight)(e)||(0,s.isEnd)(e)||t){e.preventDefault();const s=this.tokens.length-1;if(e.target===this.tokens[s]&&this.tokens[s]===document.activeElement){setTimeout(()=>{this.focus()},0)}else if(t){e.preventDefault();return this.tokenizer._handleArrowCtrl(e.target,this.tokens,true)}}this.tokenizer._handleItemNavigation(e,i);if(n&&["c","x"].includes(e.key.toLowerCase())){e.preventDefault();const t=e.key.toLowerCase()==="x";const s=i.filter(e=>e.selected);if(t){const e=this.tokenizer._fillClipboard("cut",s);s.forEach(e=>{this.fireEvent("token-delete",{token:e})});this.focus();return e}return this.tokenizer._fillClipboard("copy",s)}}_handleLeft(e){const t=this.getDomRef().querySelector(`input`).selectionStart;const s=this.tokens;const n=s.length&&s[s.length-1];if(t===0&&n){e.preventDefault();n.focus();this.tokenizer._itemNav.setCurrentItem(n)}}_focusFirstToken(e){const t=this.tokens;const s=t.length&&t[0];if(s){e.preventDefault();s.focus();this.tokenizer._itemNav.setCurrentItem(s)}}_onfocusout(e){super._onfocusout(e);const t=e.relatedTarget;const s=this.contains(t);const n=this.shadowRoot.contains(t);if(!s&&!n){this.expandedTokenizer=false}}async _onfocusin(e){const t=await this.getInputDOMRef();if(e.target===t){await super._onfocusin(e)}}shouldOpenSuggestions(){const e=super.shouldOpenSuggestions();const t=this._valueHelpIconPressed;const s=this.value!=="";return e&&s&&!t&&!this._skipOpenSuggestions}lastItemDeleted(){setTimeout(()=>{this.focus()},0)}get tokenizer(){return this.shadowRoot.querySelector("[ui5-tokenizer]")}get _tokensCountText(){if(!this.tokenizer){return}return this.tokenizer._tokensCountText()}get _tokensCountTextId(){return`${this._id}-hiddenText-nMore`}get _placeholder(){if(this.tokenizer&&this.tokenizer._tokens.length){return""}return this.placeholder}get accInfo(){const e=`${this._tokensCountTextId} ${this.suggestionsTextId} ${this.valueStateTextId}`.trim();return{input:{...super.accInfo.input,ariaRoledescription:this.ariaRoleDescription,ariaDescribedBy:e}}}get ariaRoleDescription(){return d.i18nBundle.getText(n.MULTIINPUT_ROLEDESCRIPTION_TEXT)}static get dependencies(){return[...i.default.dependencies,a.default,u.default,l.default]}}d.define();var f=d;e.default=f});
//# sourceMappingURL=MultiInput.js.map