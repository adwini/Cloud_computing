sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/base/types/ValueState","sap/ui/webc/common/thirdparty/localization/features/calendar/Gregorian","sap/ui/webc/common/thirdparty/localization/DateFormat","sap/ui/webc/common/thirdparty/base/asset-registries/LocaleData","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/icons/time-entry-request","./Icon","./ResponsivePopover","./generated/templates/TimePickerTemplate.lit","./generated/templates/TimePickerPopoverTemplate.lit","./Input","./Button","./TimeSelection","./generated/i18n/i18n-defaults","./generated/themes/TimePicker.css","./generated/themes/TimePickerPopover.css","./generated/themes/ResponsivePopoverCommon.css"],function(e,t,a,i,s,n,r,u,l,o,c,d,p,h,f,m,g,v,_,y,P,V){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=b(t);a=b(a);s=b(s);n=b(n);u=b(u);d=b(d);p=b(p);h=b(h);f=b(f);m=b(m);g=b(g);v=b(v);y=b(y);P=b(P);V=b(V);function b(e){return e&&e.__esModule?e:{default:e}}const S={languageAware:true,managedSlots:true,properties:{value:{type:String,defaultValue:undefined},valueState:{type:n.default,defaultValue:n.default.None},disabled:{type:Boolean},readonly:{type:Boolean},_isPickerOpen:{type:Boolean,noAttribute:true}},slots:{valueStateMessage:{type:HTMLElement}},events:{change:{},input:{}}};class w extends t.default{static get metadata(){return S}static get render(){return a.default}static get styles(){return y.default}static get staticAreaTemplate(){return f.default}static get template(){return h.default}static get dependencies(){return[d.default,p.default,v.default,m.default,g.default]}static async onDefine(){[w.i18nBundle]=await Promise.all([(0,i.getI18nBundle)("@ui5/webcomponents"),(0,l.fetchCldr)((0,s.default)().getLanguage(),(0,s.default)().getRegion(),(0,s.default)().getScript())])}static get staticAreaStyles(){return[V.default,P.default]}constructor(){super()}get _placeholder(){return undefined}get _formatPattern(){return undefined}get _effectiveValue(){return this.value}get _timeSelectionValue(){return this.tempValue}onTimeSelectionChange(e){this.tempValue=e.detail.value}submitPickers(){this._updateValueAndFireEvents(this.tempValue,true,["change","value-changed"]);this.closePicker()}onResponsivePopoverAfterClose(){this._isPickerOpen=false}async _handleInputClick(){if(this._isPickerOpen){return}const e=await this._getInputField();if(e){e.select()}}_updateValueAndFireEvents(e,t,a){if(e===this.value){return}const i=this.isValid(e);if(i&&t){e=this.normalizeValue(e)}if(!a.includes("input")){this.value="";this.value=e}this.tempValue=e;this._updateValueState();a.forEach(t=>{this.fireEvent(t,{value:e,valid:i})})}_updateValueState(){const e=this.isValid(this.value);if(!e){this.valueState=n.default.Error}else if(e&&this.valueState===n.default.Error){this.valueState=n.default.None}}async _handleInputChange(e){this._updateValueAndFireEvents(e.target.value,true,["change","value-changed"])}async _handleInputLiveChange(e){this._updateValueAndFireEvents(e.target.value,false,["input"])}async closePicker(){const e=await this._getPopover();e.close();this._isPickerOpen=false}async openPicker(){this.tempValue=this.value&&this.isValid(this.value)?this.value:this.getFormat().format(new Date);const e=await this._getPopover();e.showAt(this);this._isPickerOpen=true}togglePicker(){if(this.isOpen()){this.closePicker()}else if(this._canOpenPicker()){this.openPicker()}}isOpen(){return!!this._isPickerOpen}_canOpenPicker(){return!this.disabled&&!this.readonly}async _getPopover(){const e=await this.getStaticAreaItemDomRef();return e.querySelector("[ui5-responsive-popover]")}_getInput(){return this.shadowRoot.querySelector("[ui5-input]")}_getInputField(){const e=this._getInput();return e&&e.getInputDOMRef()}_onkeydown(e){if((0,o.isShow)(e)){e.preventDefault();this.togglePicker()}if(this.isOpen()){return}if((0,o.isPageUpShiftCtrl)(e)){e.preventDefault();this._modifyValueBy(1,"second")}else if((0,o.isPageUpShift)(e)){e.preventDefault();this._modifyValueBy(1,"minute")}else if((0,o.isPageUp)(e)){e.preventDefault();this._modifyValueBy(1,"hour")}else if((0,o.isPageDownShiftCtrl)(e)){e.preventDefault();this._modifyValueBy(-1,"second")}else if((0,o.isPageDownShift)(e)){e.preventDefault();this._modifyValueBy(-1,"minute")}else if((0,o.isPageDown)(e)){e.preventDefault();this._modifyValueBy(-1,"hour")}}get _isPattern(){return this._formatPattern!=="medium"&&this._formatPattern!=="short"&&this._formatPattern!=="long"}getFormat(){let e;if(this._isPattern){e=u.default.getInstance({pattern:this._formatPattern})}else{e=u.default.getInstance({style:this._formatPattern})}return e}formatValue(e){return this.getFormat().format(e)}isValid(e){return e===""||this.getFormat().parse(e)}normalizeValue(e){if(e===""){return e}return this.getFormat().format(this.getFormat().parse(e))}_modifyValueBy(e,t){const a=this.getFormat().parse(this._effectiveValue);if(!a){return}if(t==="hour"){a.setHours(a.getHours()+e)}else if(t==="minute"){a.setMinutes(a.getMinutes()+e)}else if(t==="second"){a.setSeconds(a.getSeconds()+e)}const i=this.formatValue(a);this._updateValueAndFireEvents(i,true,["change","value-changed"])}_handleWheel(e){e.preventDefault()}get submitButtonLabel(){return w.i18nBundle.getText(_.TIMEPICKER_SUBMIT_BUTTON)}get cancelButtonLabel(){return w.i18nBundle.getText(_.TIMEPICKER_CANCEL_BUTTON)}get openIconName(){return"time-entry-request"}}var k=w;e.default=k});
//# sourceMappingURL=TimePickerBase.js.map