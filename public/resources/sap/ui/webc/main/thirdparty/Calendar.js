sap.ui.define(["exports","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/base/Render","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/localization/getCachedLocaleDataInstance","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/DateFormat","./CalendarDate","./CalendarPart","./CalendarHeader","./DayPicker","./MonthPicker","./YearPicker","./types/CalendarSelectionMode","sap/ui/webc/common/thirdparty/localization/features/calendar/Gregorian","./generated/templates/CalendarTemplate.lit","./generated/themes/Calendar.css"],function(e,t,a,r,n,s,i,o,d,c,l,u,h,p,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=D(t);n=D(n);s=D(s);i=D(i);o=g(o);d=D(d);c=D(c);l=D(l);u=D(u);h=D(h);p=D(p);y=D(y);m=D(m);function _(e){if(typeof WeakMap!=="function")return null;var t=new WeakMap;var a=new WeakMap;return(_=function(e){return e?a:t})(e)}function g(e,t){if(!t&&e&&e.__esModule){return e}if(e===null||typeof e!=="object"&&typeof e!=="function"){return{default:e}}var a=_(t);if(a&&a.has(e)){return a.get(e)}var r={};var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e){if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;if(i&&(i.get||i.set)){Object.defineProperty(r,s,i)}else{r[s]=e[s]}}}r.default=e;if(a){a.set(e,r)}return r}function D(e){return e&&e.__esModule?e:{default:e}}const M={tag:"ui5-calendar",fastNavigation:true,properties:{selectionMode:{type:p.default,defaultValue:p.default.Single},hideWeekNumbers:{type:Boolean},_currentPicker:{type:String,defaultValue:"day"},_previousButtonDisabled:{type:Boolean},_nextButtonDisabled:{type:Boolean},_headerMonthButtonText:{type:String},_headerYearButtonText:{type:String}},managedSlots:true,slots:{default:{propertyName:"dates",type:HTMLElement,invalidateOnChildChange:true}},events:{"selected-dates-change":{detail:{dates:{type:Array},values:{type:Array}}},"show-month-press":{},"show-year-press":{}}};class P extends d.default{static get metadata(){return M}static get template(){return y.default}static get styles(){return m.default}get _selectedDatesTimestamps(){return this.dates.map(e=>{const t=e.value;return t&&!!this.getFormat().parse(t)?this._getTimeStampFromString(t)/1e3:undefined}).filter(e=>!!e)}_setSelectedDates(e){const t=e.map(e=>this.getFormat().format(new Date(e*1e3),true));const a=[...this.dates].map(e=>e.value);this.dates.filter(e=>!t.includes(e.value)).forEach(e=>{this.removeChild(e)});t.filter(e=>!a.includes(e)).forEach(e=>{const t=document.createElement(o.default.getMetadata().getTag());t.value=e;this.appendChild(t)})}async onAfterRendering(){await(0,a.renderFinished)();this._previousButtonDisabled=!this._currentPickerDOM._hasPreviousPage();this._nextButtonDisabled=!this._currentPickerDOM._hasNextPage();const e=i.default.getDateInstance({format:"y",calendarType:this.primaryCalendarType});const r=(0,n.default)((0,s.default)());this._headerMonthButtonText=r.getMonthsStandAlone("wide",this.primaryCalendarType)[this._calendarDate.getMonth()];if(this._currentPicker==="year"){const a=new t.default(this._calendarDate,this._primaryCalendarType);const r=new t.default(this._calendarDate,this._primaryCalendarType);a.setYear(this._currentPickerDOM._firstYear);r.setYear(this._currentPickerDOM._lastYear);this._headerYearButtonText=`${e.format(a.toLocalJSDate(),true)} - ${e.format(r.toLocalJSDate(),true)}`}else{this._headerYearButtonText=String(e.format(this._localDate,true))}}onHeaderShowMonthPress(e){this._currentPickerDOM._autoFocus=false;this._currentPicker="month";this.fireEvent("show-month-press",e)}onHeaderShowYearPress(e){this._currentPickerDOM._autoFocus=false;this._currentPicker="year";this.fireEvent("show-year-press",e)}get _currentPickerDOM(){return this.shadowRoot.querySelector(`[ui5-${this._currentPicker}picker]`)}onHeaderPreviousPress(){this._currentPickerDOM._showPreviousPage()}onHeaderNextPress(){this._currentPickerDOM._showNextPage()}get secondaryCalendarTypeButtonText(){if(!this.secondaryCalendarType){return}const e=new Date(this._timestamp*1e3);const t=i.default.getDateInstance({format:"y",calendarType:this.secondaryCalendarType});const a=this._getDisplayedSecondaryMonthText();const r=t.format(e,true);return{yearButtonText:r,monthButtonText:a.text,monthButtonInfo:a.info}}_getDisplayedSecondaryMonthText(){const e=this._getDisplayedSecondaryMonths();const t=(0,n.default)((0,s.default)());const a=t.getIntervalPattern();const r=(0,n.default)((0,s.default)()).getMonthsStandAlone("abbreviated",this.secondaryCalendarType);const i=(0,n.default)((0,s.default)()).getMonthsStandAlone("wide",this.secondaryCalendarType);if(e.startMonth===e.endMonth){return{text:t.getMonths("abbreviated",this.secondaryCalendarType)[e.startMonth],textInfo:t.getMonths("wide",this.secondaryCalendarType)[e.startMonth]}}return{text:a.replace(/\{0\}/,r[e.startMonth]).replace(/\{1\}/,r[e.endMonth]),textInfo:a.replace(/\{0\}/,i[e.startMonth]).replace(/\{1\}/,i[e.endMonth])}}_getDisplayedSecondaryMonths(){const e=new Date(this._timestamp*1e3);let a=t.default.fromLocalJSDate(e,this._primaryCalendarType);a.setDate(1);a=new t.default(a,this.secondaryCalendarType);const r=a.getMonth();let n=t.default.fromLocalJSDate(e,this._primaryCalendarType);n.setDate(this._getDaysInMonth(n));n=new t.default(n,this.secondaryCalendarType);const s=n.getMonth();return{startMonth:r,endMonth:s}}_getDaysInMonth(e){const a=new t.default(e);a.setDate(1);a.setMonth(a.getMonth()+1);a.setDate(0);return a.getDate()}get _isHeaderMonthButtonHidden(){return this._currentPicker==="month"||this._currentPicker==="year"}get _isDayPickerHidden(){return this._currentPicker!=="day"}get _isMonthPickerHidden(){return this._currentPicker!=="month"}get _isYearPickerHidden(){return this._currentPicker!=="year"}onSelectedDatesChange(e){const a=e.detail.timestamp;const r=e.detail.dates;const n=r.map(e=>{const a=t.default.fromTimestamp(e*1e3,this._primaryCalendarType);return this.getFormat().format(a.toUTCJSDate(),true)});this.timestamp=a;const s=!this.fireEvent("selected-dates-change",{timestamp:a,dates:[...r],values:n},true);if(!s){this._setSelectedDates(r)}}onSelectedMonthChange(e){this.timestamp=e.detail.timestamp;this._currentPicker="day";this._currentPickerDOM._autoFocus=true}onSelectedYearChange(e){this.timestamp=e.detail.timestamp;this._currentPicker="day";this._currentPickerDOM._autoFocus=true}onNavigate(e){this.timestamp=e.detail.timestamp}_onkeydown(e){if((0,r.isF4)(e)&&this._currentPicker!=="month"){this._currentPicker="month"}if((0,r.isF4Shift)(e)&&this._currentPicker!=="year"){this._currentPicker="year"}}get selectedDates(){return this._selectedDatesTimestamps}set selectedDates(e){this._setSelectedDates(e)}static get dependencies(){return[o.default,c.default,l.default,u.default,h.default]}}P.define();var k=P;e.default=k});
//# sourceMappingURL=Calendar.js.map