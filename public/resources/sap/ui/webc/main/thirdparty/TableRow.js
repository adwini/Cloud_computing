sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/util/getActiveElement","sap/ui/webc/common/thirdparty/base/util/TabbableElements","./CheckBox","./types/TableMode","./types/TableRowType","./generated/templates/TableRowTemplate.lit","./generated/i18n/i18n-defaults","./generated/themes/TableRow.css"],function(e,t,i,s,n,l,o,a,r,u,c,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=p(t);s=p(s);l=p(l);a=p(a);r=p(r);u=p(u);c=p(c);h=p(h);function p(e){return e&&e.__esModule?e:{default:e}}const f={tag:"ui5-table-row",managedSlots:true,slots:{default:{propertyName:"cells",type:HTMLElement,individualSlots:true}},properties:{mode:{type:r.default,defaultValue:r.default.None},type:{type:u.default,defaultValue:u.default.Inactive},selected:{type:Boolean},active:{type:Boolean},_columnsInfo:{type:Object,multiple:true},_tabIndex:{type:String,defaultValue:"-1"},_busy:{type:Boolean},_ariaPosition:{type:String,defaultValue:"",noAttribute:true}},events:{"row-click":{},_focused:{},"selection-requested":{},"f7-pressed":{}}};class m extends t.default{static get metadata(){return f}static get styles(){return h.default}static get render(){return s.default}static get template(){return c.default}static get dependencies(){return[a.default]}constructor(){super();const e=e=>{this.activate()};this._ontouchstart={handleEvent:e,passive:true}}_onmouseup(){this.deactivate()}_onkeydown(e){const t=(0,l.default)();const i=this.type===u.default.Active;const s=this.isSingleSelect;const a=s||this.isMultiSelect;const r=this._activeElementHasAttribute("ui5-table-row");const c=e.target.classList.contains("ui5-multi-select-checkbox");if((0,n.isTabNext)(e)&&t===((0,o.getLastTabbableElement)(this)||this.root)){this.fireEvent("_forward-after",{target:t})}if((0,n.isTabPrevious)(e)&&t===this.root){this.fireEvent("_forward-before",{target:t})}if((0,n.isSpace)(e)&&e.target.tagName.toLowerCase()==="tr"){e.preventDefault()}if(r&&!c){if((0,n.isSpace)(e)&&a||(0,n.isEnter)(e)&&s){this.fireEvent("selection-requested",{row:this})}if((0,n.isEnter)(e)&&i){this.fireEvent("row-click",{row:this});if(!s){this.activate()}}}if((0,n.isF7)(e)){e.preventDefault();this.fireEvent("f7-pressed",{row:this})}}_onkeyup(e){if((0,n.isSpace)(e)||(0,n.isEnter)(e)){this.deactivate()}}_ontouchend(){this.deactivate()}_onfocusout(){this.deactivate()}_onfocusin(e,t=false){if(t||this._activeElementHasAttribute("ui5-table-cell")){this.root.focus();this.activate()}this.fireEvent("_focused",e)}_onrowclick(e){const t=e.target.classList.contains("ui5-multi-select-checkbox");if(e.isMarked==="button"){return}if(!this.contains(this.getRootNode().activeElement)){this._onfocusin(e,true);this.deactivate()}if(this._activeElementHasAttribute("ui5-table-row")){if(this.isSingleSelect){this._handleSelection()}if(this.type===u.default.Active&&!t){this.fireEvent("row-click",{row:this})}}}_handleSelection(){this.fireEvent("selection-requested",{row:this})}_activeElementHasAttribute(e){return this.getRootNode().activeElement.hasAttribute(e)}activate(){if(this.type===u.default.Active){this.active=true}}deactivate(){if(this.active){this.active=false}}get shouldPopin(){return this._columnsInfo.filter(e=>e.demandPopin||!e.visible).length}get allColumnsPoppedIn(){return this._columnsInfo.every(e=>e.demandPopin&&!e.visible)}onBeforeRendering(){if(!this.shouldPopin){return}this.visibleCells=[];this.popinCells=[];if(this.cells.length===0){return}const e=this.allColumnsPoppedIn?"all-columns-popped-in":"";this._columnsInfo.forEach((t,i)=>{const s=this.cells[i];if(!s){return}if(t.visible){this.visibleCells.push(s);s.popined=false}else if(t.demandPopin){const i=this.popinCells.length===0?"popin-header":"";this.popinCells.push({cell:s,popinText:t.popinText,classes:`ui5-table-popin-row ${e} ${i}`});s.popined=true}else{s.popined=false}},this);const t=this.visibleCells[this.visibleCells.length-1];if(t){t.lastInRow=true}}get visibleCellsCount(){let e=this.visibleCells.length;if(this.isMultiSelect){e+=1}return e}get ariaLabelText(){const e=this.cells.map((e,t)=>{const i=this.getColumnTextByIdx(t);const s=this.getCellText(e);return`${i} ${s}`}).join(" ");return`${e}. ${this._ariaPosition}`}get ariaLabelRowSelection(){return m.i18nBundle.getText(d.ARIA_LABEL_ROW_SELECTION)}get isSingleSelect(){return this.mode==="SingleSelect"}get isMultiSelect(){return this.mode==="MultiSelect"}get root(){return this.shadowRoot.querySelector(".ui5-table-row-root")}getCellText(e){return this.getNormilzedTextContent(e.textContent)}getColumnTextByIdx(e){const t=this._columnsInfo[e];if(!t){return""}return this.getNormilzedTextContent(t.text)}getNormilzedTextContent(e){return e.replace(/[\n\r\t]/g,"").trim()}static async onDefine(){m.i18nBundle=await(0,i.getI18nBundle)("@ui5/webcomponents")}}m.define();var b=m;e.default=b});
//# sourceMappingURL=TableRow.js.map