sap.ui.define(["exports","../Device","../EventProvider","../animations/scroll"],function(t,s,e,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;e=i(e);o=i(o);function i(t){return t&&t.__esModule?t:{default:t}}const r="scroll";const h=(0,s.supportsTouch)()?"touchend":"mouseup";class n extends e.default{constructor(t){super();this.containerComponent=t;this.mouseMove=this.ontouchmove.bind(this);this.mouseUp=this.ontouchend.bind(this);this.touchStart=this.ontouchstart.bind(this);this.supportsTouch=(0,s.supportsTouch)();this.cachedValue={};this.startX=0;this.startY=0;if(this.supportsTouch){t.addEventListener("touchstart",this.touchStart,{passive:true});t.addEventListener("touchmove",this.mouseMove,{passive:true});t.addEventListener("touchend",this.mouseUp,{passive:true})}else{t.addEventListener("mousedown",this.touchStart,{passive:true})}}set scrollContainer(t){this._container=t}get scrollContainer(){return this._container}async scrollTo(t,s,e=0,o=0){let i=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0;while(!i&&e>0){await new Promise(t=>{setTimeout(()=>{i=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0;e--;t()},o)})}this._container.scrollLeft=t;this._container.scrollTop=s}move(t,s,e){if(e){this._container.scrollLeft+=t;this._container.scrollTop+=s;return}return(0,o.default)({element:this._container,dx:t,dy:s})}getScrollLeft(){return this._container.scrollLeft}getScrollTop(){return this._container.scrollTop}_isTouchInside(t){const s=this._container.getBoundingClientRect();const e=this.supportsTouch?t.clientX:t.x;const o=this.supportsTouch?t.clientY:t.y;return e>=s.left&&e<=s.right&&o>=s.top&&o<=s.bottom}ontouchstart(t){const s=this.supportsTouch?t.touches[0]:null;if(!this.supportsTouch){document.addEventListener("mouseup",this.mouseUp,{passive:true});document.addEventListener("mousemove",this.mouseMove,{passive:true})}else{this.startX=s.pageX;this.startY=s.pageY}this._prevDragX=this.supportsTouch?s.pageX:t.x;this._prevDragY=this.supportsTouch?s.pageY:t.y;this._canScroll=this._isTouchInside(this.supportsTouch?s:t)}ontouchmove(t){if(!this._canScroll){return}const s=this._container;const e=this.supportsTouch?t.touches[0]:null;const o=this.supportsTouch?e.pageX:t.x;const i=this.supportsTouch?e.pageY:t.y;s.scrollLeft+=this._prevDragX-o;s.scrollTop+=this._prevDragY-i;this.fireEvent(r,{isLeft:o>this._prevDragX,isRight:o<this._prevDragX});this.cachedValue.dragX=this._prevDragX;this.cachedValue.dragY=this._prevDragY;this._prevDragX=o;this._prevDragY=i}ontouchend(t){if(this.supportsTouch){const s=Math.abs(t.changedTouches[0].pageX-this.startX);const e=Math.abs(t.changedTouches[0].pageY-this.startY);if(s<10&&e<10){return}}if(!this._canScroll){return}const s=this._container;const e=this.supportsTouch?t.changedTouches[0].pageX:t.x;const o=this.supportsTouch?t.changedTouches[0].pageY:t.y;s.scrollLeft+=this._prevDragX-e;s.scrollTop+=this._prevDragY-o;const i=e===this._prevDragX;const r=i?this.cachedValue.dragX:e;this.fireEvent(h,{isLeft:r<this._prevDragX,isRight:r>this._prevDragX});this._prevDragX=e;this._prevDragY=o;if(!this.supportsTouch){document.removeEventListener("mousemove",this.mouseMove,{passive:true});document.removeEventListener("mouseup",this.mouseUp)}}}var c=n;t.default=c});
//# sourceMappingURL=ScrollEnablement.js.map